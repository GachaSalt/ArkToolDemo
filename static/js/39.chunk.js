(this["webpackJsonpark-tool"]=this["webpackJsonpark-tool"]||[]).push([[39],{1086:function(e,t,a){"use strict";a.r(t);var n=a(36),r=a(130),i=a(131),l=a(133),s=a(132),c=a(0),o=a.n(c),u=a(518),d=a(680),m=a(987),p=a.n(m),h=a(6),v=a(399),f=a(138),g=Object.keys(u.d),x=function(e){return parseFloat(e).toFixed(1).replace(/\.?0+$/,"")},y=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).data=n.parserInput(e.input),n.state={result:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;0!==Object.keys(this.data.required).length?fetch("https://planner.penguin-stats.io/plan/",{method:"post",body:JSON.stringify(this.data)}).then((function(e){return e.json()})).then((function(t){return e.setState({result:e.parserResult(t)})})).catch((function(t){e.setState({result:"\u8fde\u63a5\u4e2d\u65ad\uff0c\u8bf7\u5c1d\u8bd5Export\u540e\u76f4\u63a5\u8bbf\u95eeArkPlanner."})})):this.setState({result:"No Input"})}},{key:"parserInput",value:function(e){var t={};Object.keys(e).filter((function(t){return parseInt(e[t].need)>0})).forEach((function(a){t[u.d[a].name]=e[a].need}));var a={};return Object.keys(e).filter((function(t){return parseInt(e[t].have)>0})).forEach((function(t){a[u.d[t].name]=e[t].have})),{required:t,owned:a,exp_demand:this.props.exp_demand,extra_outc:this.props.extra_outc,gold_demand:this.props.gold_demand,exclude:this.props.ban_stage?this.props.exclude:[],store:!1}}},{key:"parserResult",value:function(e){var t=e.stages.map((function(e){var t=Object.keys(e.items).map((function(t){return{id:g.find((function(e){return u.d[e].name===t})),count:e.items[t]}})).sort((function(e,t){return u.d[t.id].rarity===u.d[e.id].rarity?t.count-e.count:u.d[t.id].rarity-u.d[e.id].rarity}));return Object(n.a)(Object(n.a)({},e),{},{items:t})})),a=e.syntheses.map((function(e){var t=e.target,a=e.count;t=g.find((function(e){return u.d[e].name===t}));var n=Object(d.c)(t,a),r=n.goldCost,i=n.cost;return{target:t,count:a,goldCost:r,cost:i}})).filter((function(e){return e.target})),r=0;t.forEach((function(e){r+=parseFloat(e.count)}));var i=0;return a.forEach((function(e){i+=e.goldCost})),Object(f.a)({category:"Calculator",action:"Fetch",value:e.cost}),{apCost:e.cost,battle:r.toFixed(0),stages:t,syntheses:a,goldCost:i,gold:e.gold,exp:e.exp}}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.icon;return null===this.state.result&&o.a.createElement("div",{className:t.loading},o.a.createElement(v.a,{color:"secondary"}))||o.a.createElement("div",{className:t.root},this.state.result&&this.state.result.hasOwnProperty("apCost")&&o.a.createElement("div",null,o.a.createElement("div",null,"\u7406\u667a\u6d88\u8017\u671f\u671b: ".concat(x(this.state.result.apCost))),o.a.createElement("div",null,"\u5176\u4ed6\u6536\u76ca: ".concat(x(this.state.result.gold),"\u9f99\u95e8\u5e01 & ").concat(x(this.state.result.exp),"\u4f5c\u6218\u8bb0\u5f55")),o.a.createElement("div",null,"\u5408\u6210\u82b1\u8d39: ".concat(x(this.state.result.goldCost),"\u9f99\u95e8\u5e01")),o.a.createElement("div",null,"\u4f5c\u6218(\u5171\u8ba1".concat(x(this.state.result.battle),"\u6b21):")),o.a.createElement("div",null,this.state.result.stages.map((function(e){return o.a.createElement("div",{key:"div-row-".concat(e.stage),className:t.row},o.a.createElement("div",{className:[a?t.alignDiv:null,t.link].join(" ")},e.stage),o.a.createElement("div",{className:a?t.alignDiv:null},"".concat(x(e.count),"\u6b21")),o.a.createElement("div",{className:t.flexWrap},e.items.map((function(e){return o.a.createElement("div",{key:"div-inner-".concat(e.id),className:t.inner},a?[o.a.createElement(u.a,{key:"i-".concat(e.id),size:40,id:e.id}),o.a.createElement("div",{key:"count-".concat(e.id)},"".concat(x(e.count)))]:u.d[e.id].name+" x"+x(e.count))}))))}))),this.state.result.syntheses.length>0&&o.a.createElement("div",null,o.a.createElement("div",null," \u5408\u6210\u5217\u8868:"),o.a.createElement("div",null,this.state.result.syntheses.map((function(e,n){return o.a.createElement("div",{key:n,className:t.synthesesRow},o.a.createElement("div",{className:a?t.inner:t.long},a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{size:40,id:e.target}),o.a.createElement("div",null,"x".concat(x(e.count)))),!a&&u.d[e.target].name+" x"+x(e.count)),o.a.createElement("div",{className:a?t.alignArrow:null},o.a.createElement(p.a,null)),e.cost&&Object.keys(e.cost).map((function(n,r){return o.a.createElement("div",{key:r,className:t.inner},a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{size:40,id:n}),o.a.createElement("div",null,"x".concat(x(e.cost[n])))),!a&&u.d[n].name+" x"+x(e.cost[n]))})))})))))||o.a.createElement("div",{className:t.loading},this.state.result))}}]),a}(o.a.Component);t.default=Object(h.a)((function(e){return{root:{"& div":{fontSize:"14px"},"&>div>div":{marginBottom:"10px"}},loading:{margin:"auto",display:"flex",width:"100%",height:"50px",justifyContent:"center",alignItems:"center","&>div":{margin:"auto"}},inner:{display:"flex",flexDirection:"column",alignItems:"center",marginRight:"10px",whiterSpace:"nowrap","&>div":{marginRight:"5px"}},row:{display:"flex",alignItems:"top","&>div:nth-child(1)":{width:"40px",flexShrink:0},"&>div:nth-child(2)":{width:"55px",flexShrink:0}},alignDiv:{marginTop:"10px"},synthesesRow:{display:"flex",alignItems:"center","&>div:nth-child(1)":{width:"30px"},"&>div:nth-child(2)":{width:"24px",display:"flex",alignItems:"center"}},long:{width:"120px !important"},alignArrow:{padding:"3px 0 23px 0",marginRight:"10px"},flexWrap:{display:"flex",flexWrap:"wrap",marginBottom:"10px"},link:{marginBottom:"20px",verticalAlign:"baseline","& a, a:link, a:visited":{color:"#606266",textDecoration:"none"},"& a, a:hover, a:active":{textDecoration:"underline"}}}}))(y)},987:function(e,t,a){"use strict";var n=a(22),r=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(0)),l=(0,n(a(24)).default)(i.createElement("path",{d:"M14 7l-5 5 5 5V7z"}),"ArrowLeft");t.default=l}}]);